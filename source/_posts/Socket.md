---
title: Socket 网络编程
date: 2018-06-06 12:28:23
tags:
  - Socket
categories:
  - Socket
author: 奎宇

---

## Socket 网络编程
**网络**是信息的传输、接受、共享的虚拟平台，通过点、面、体联系实现资源共享。

**网络编程**是对信息的接收，通过调用相应的api，利用传输通道进行数据交换的过程。设计：网络模型、套接字、数据包。

### 网络模型
客户端传输数据->表示层->会话层->传输层->网络层->数据链路层->物理层
接收相反


- 表示层：把应用的数据表示成数据层对应的数据（比如 字符
 串转换成byte 数据）
- 会话层：把不同机器进行会话的管理
- 传输层：接收上一层的数据。必要的时候把数据分割并将数据交给网络层。保证数据段的有效性（可以有效的把数据传到对面）
- 网络层: 控制子网的运行（比如路由选择）
- 数据链路层： 物理的地址寻找，将原始的byte流转换成逻辑的传输路线
- 物理层： 电信号的传输，原始的byte流传输

功能分类
- 基础层： 物理层、数据链路层、网络层
- 传输层：TCP、UDP协议层，Socket
- 高级层：会话层、表示层、应用层

<!-- more -->


### 网络模型对应关系

![](/Socket/20190106050539867.png)

### Socket
#### Socket含义 
- IP 和 端口地址的结合协议 （RFC 793）
- 地址和端口的描述协议
- TCP/IP 写的总称，网络api 的集合实现
- 涵盖了： Stream Socket/Datagram Socket   (TCP/UDP)

#### Socket 作用和组成
**传输中用于唯一表示两个端点之间的链接**
端点：包括（IP + Port）

#### Socket 之 TCP

一、 TCP 是面向链接的通讯协议
二、 通过三次握手建立链接，通讯完成后拆除连接

- 客户 端发送一个带SYN标志的TCP报文到server。这是三次握手过程中的报文1。
- server端回应client的，这是三次握手中的第2个报文。这个报文同一时候带ACK标志和SYN标志。因此它表示对刚才clientSYN报文的回应。同一时候又标志SYN给client，询问client是否准备好进行数据通 讯。
-  客户必须再次回应服务段一个ACK报文，这是报文段3。

> telnet建立连接，断开连接的使用wireshark捕获的packet截图

![](/Socket/lianjiexiang.jpg)

> TCP建立连接的三次握手过程，以及关闭连接的四次握手过程

![](/Socket/woshou.jpg)

三、 由于是面向连接所以只能通讯与端到端的。


![](/Socket/tcpsend.png)

#### Socket 之 UDP

一、 UDP 是面向无连接的通讯协议
二、 UDP 数据包括目的端口号和源端口号信息
三、 通讯不需要连接，所以可以实现广播发送，不局限于端到端。

![](/Socket/udpsend.png)

### CS模型（client-server application）
进程通讯的主要模型。（客户端和服务器交互的模型）

常见的
- FTP
- SMTP
- HTTP

